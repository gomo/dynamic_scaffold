<%unless flash[:dynamic_saffold_danger].nil?%>
  <div class="alert alert-danger" role="alert">
    <%= flash[:dynamic_saffold_danger] %>
  </div>
<%end%>
<%= form_with method: :patch, url: @dynamic_scaffold_util.path_for(:sort_or_destroy) do%>
<div class="dynamicScaffold-row">
  <div class="text-left">
    <a href="new" class="btn btn-outline-primary btn-primary btn-sm"><%= dynamic_scaffold_icon(:add) %> <%= t('dynamic_scaffold.buttons.add') %></a>
  </div>
  <%= render 'dynamic_scaffold/bootstrap/save_order'%>
</div>
<div class="dynamicScaffold-row">
  <% if @dynamic_scaffold_util.records.empty? %>
    <p class="lead"><%= t('dynamic_scaffold.messages.no_records', model: @dynamic_scaffold.model.model_name.human) %></p>
  <% else %>
    <ul class="resplist resplist-striped">
      <%@dynamic_scaffold_util.records.each do |record|%>
        <li class="resplist-row js-item-row">
          <div class="resplist-items">
          <%@dynamic_scaffold.list.items.each do |disp|%>
            <%= content_tag :div, class: classNames('resplist-item', disp.classnames), **disp.html_attributes do%>
              <div class="resplist-label"><%= disp.label %></div>
              <div class="resplist-value"><%= disp.value record, self %></div>
            <%end%>
          <%end%>
          </div>
          <div class="resplist-footer clearfix">
            <div class="float-right pull-right">
              <div class="btn-group">
                <a href="<%= @dynamic_scaffold_util.path_for(:edit, key: @dynamic_scaffold_util.pkey_params(record)) %>" class="btn btn-primary btn-outline-primary btn-sm">
                  <%= dynamic_scaffold_icon(:edit) %> <%= t('dynamic_scaffold.buttons.edit') %>
                </a>
              </div>
              <% if @dynamic_scaffold.list.sorter %>
              <input type="hidden" name="pkeys[]" value="<%= @dynamic_scaffold_util.pkey_string(record) %>">
              <div class="btn-group">
                <button class="btn btn-outline-secondary btn-default btn-sm js-sorter-up">
                  <%= dynamic_scaffold_icon(:up) %>
                </button>
                <button class="btn btn-outline-secondary btn-default btn-sm js-sorter-down">
                  <%= dynamic_scaffold_icon(:down) %>
                </button>
              </div>
              <% end %>
              <div class="btn-group">
                <button data-confirm-message="<%= t('dynamic_scaffold.messages.destroy_confirm') %>" type="submit" class="btn btn-danger btn-sm js-destory" name="submit_destroy" value="<%= @dynamic_scaffold_util.pkey_string(record) %>">
                  <%= dynamic_scaffold_icon(:delete) %>
                </button>
              </div>
            </div>
          </div>
        </li>
      <%end%>
    </ul>
  <% end %>
</div>
<div class="dynamicScaffold-row">
  <%= render 'dynamic_scaffold/bootstrap/save_order'%>
</div>
<% end %>